{"ast":null,"code":"var __assign = this && this.__assign || Object.assign || function (t) {\n  for (var s, i = 1, n = arguments.length; i < n; i++) {\n    s = arguments[i];\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n  }\n  return t;\n};\nimport { stateCallback, propsCallback } from \"./blueprint\";\nimport resolveValue from \"./utils/resolveValue\";\nexport function withReducer(stateName, dispatcherName, reducer, initialValue) {\n  return {\n    instanceCallbacks: function () {\n      var update;\n      var name;\n      var dispatcher;\n      var curState;\n      return [stateCallback(function (initState, props) {\n        var newState = initState(String(stateName), resolveValue(initialValue, props));\n        update = newState.updater;\n        name = newState.name;\n        dispatcher = function (action, callback) {\n          return update(reducer(curState, action), callback);\n        };\n      }), propsCallback(function (props, state) {\n        curState = state[name];\n        return __assign({}, props, (_a = {}, _a[stateName] = curState, _a[dispatcherName] = dispatcher, _a));\n        var _a;\n      })];\n    }\n  };\n}\nexport default withReducer;","map":{"version":3,"names":["stateCallback","propsCallback","resolveValue","withReducer","stateName","dispatcherName","reducer","initialValue","instanceCallbacks","update","name","dispatcher","curState","initState","props","newState","String","updater","action","callback","state","__assign","_a"],"sources":["/Users/sumeetpravinjumde/Documents/Work/Coding/Ginger/Frontend/node_modules/reassemble/lib/withReducer.ts"],"sourcesContent":["import { Composable, stateCallback, propsCallback } from \"./blueprint\";\nimport { Mapper } from \"./types\";\nimport resolveValue from \"./utils/resolveValue\";\n\nexport type Reducer<TState, TAction> = (s: TState, a: TAction) => TState;\n\nexport function withReducer(\n  stateName: string | symbol,\n  dispatcherName: string | symbol,\n  reducer: Reducer<any, any>,\n  initialValue: Object | Mapper<any, any>,\n): Composable;\n\nexport function withReducer<TPropsIn, TPropNames extends string | symbol, TPropsValue, TAction>(\n  stateName: TPropNames,\n  dispatcherName: TPropNames,\n  reducer: Reducer<TPropsValue, TAction>,\n  initialValue: TPropsValue | Mapper<TPropsIn, TPropsValue>,\n): Composable;\n\nexport function withReducer<TPropsIn, TPropNames extends string | symbol, TPropsValue, TAction>(\n  stateName: TPropNames,\n  dispatcherName: TPropNames,\n  reducer: Reducer<TPropsValue, TAction>,\n  initialValue: TPropsValue | Mapper<TPropsIn, TPropsValue>,\n): Composable {\n  return {\n    instanceCallbacks: () => {\n      let update: any;\n      let name: any;\n      let dispatcher: any;\n      let curState: any;\n      return [\n        stateCallback((initState, props) => {\n          const newState = initState(String(stateName), resolveValue(initialValue, props));\n          update = newState.updater;\n          name = newState.name;\n          dispatcher = (action: any, callback: any) => update(reducer(curState, action), callback);\n        }),\n        propsCallback((props, state) => {\n          curState = state[name];\n          return {\n            ...props,\n            [stateName as string]: curState,\n            [dispatcherName as string]: dispatcher,\n          };\n        }),\n      ];\n    },\n  };\n}\n\nexport default withReducer;\n"],"mappings":";;;;;;;AAAA,SAAqBA,aAAa,EAAEC,aAAa,QAAQ,aAAa;AAEtE,OAAOC,YAAY,MAAM,sBAAsB;AAkB/C,OAAM,SAAAC,YACJC,SAAqB,EACrBC,cAA0B,EAC1BC,OAAsC,EACtCC,YAAyD;EAEzD,OAAO;IACLC,iBAAiB,EAAE,SAAAA,CAAA;MACjB,IAAIC,MAAW;MACf,IAAIC,IAAS;MACb,IAAIC,UAAe;MACnB,IAAIC,QAAa;MACjB,OAAO,CACLZ,aAAa,CAAC,UAACa,SAAS,EAAEC,KAAK;QAC7B,IAAMC,QAAQ,GAAGF,SAAS,CAACG,MAAM,CAACZ,SAAS,CAAC,EAAEF,YAAY,CAACK,YAAY,EAAEO,KAAK,CAAC,CAAC;QAChFL,MAAM,GAAGM,QAAQ,CAACE,OAAO;QACzBP,IAAI,GAAGK,QAAQ,CAACL,IAAI;QACpBC,UAAU,GAAG,SAAAA,CAACO,MAAW,EAAEC,QAAa;UAAK,OAAAV,MAAM,CAACH,OAAO,CAACM,QAAQ,EAAEM,MAAM,CAAC,EAAEC,QAAQ,CAAC;QAA3C,CAA2C;MAC1F,CAAC,CAAC,EACFlB,aAAa,CAAC,UAACa,KAAK,EAAEM,KAAK;QACzBR,QAAQ,GAAGQ,KAAK,CAACV,IAAI,CAAC;QACtB,OAAMW,QAAA,KACDP,KAAK,GAAAQ,EAAA,OAAAA,EAAA,CACPlB,SAAmB,IAAGQ,QAAQ,EAAAU,EAAA,CAC9BjB,cAAwB,IAAGM,UAAU,EAAAW,EAAA;;MAE1C,CAAC,CAAC,CACH;IACH;GACD;AACH;AAEA,eAAenB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}